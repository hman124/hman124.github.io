<!doctype html>
<html lang="en">

<head>
  <title>Make A QR Code</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Harrison Steed">
  <meta name="description" content="Create QR Codes From Text">
  <link rel="stylesheet" href="master.css">
</head>

<body>
  <div class="container">
    <div class="top-nav">
      <h1><a class="camo" href="../qrcode/">Qr Code Generator</a></h1>
    </div>
    <div class="content">
      <div>
        <p class="credits tile">Generator Made With <a href="https://github.com/davidshimjs/qrcodejs">qrcodejs</a></p>
        <p class="credits tile">Downloads Made With <a href="https://github.com/rndme/download">download</a></p>
        <p class="credits tile">Printing Made With <a href="https://github.com/crabbly/Print.js">Print.js</a></p>
      </div>
      <div class="input tile">
        <h1>Input</h1>
        <input type="text" id="text">
        <input type="button" value="Create" id="make">
      </div>
      <div class="output tile">
        <h1>Output</h1>
        <div id="qrcode"></div>
        <div class="export tile">
          <ul>
            <li><input class="panel" value="Download" type="button" id="download"></li>
            <li><input class="panel" value="Print" type="button" id="print"></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="qrcode.min.js"></script>
  <script src="download.min.js"></script>
  <script src="print.min.js"></script>
  <script>
    //Generator
    var qrcode = new QRCode("qrcode");

    function makeCode() {
      qrcode.makeCode($("#text").val());
	  $("#download").off("click");
      $("#download").on("click", () => {download($("#qrcode img").attr("src"), 'qrCode - ' + $("#text").val() + '.png');});
    }
    makeCode();
    $("qrcode img").attr("id", "code");
	
	$("make").click(() => {
      makeCode();
    });
    $("#text").on("keyup", function() {
      makeCode();
    });
	$("#print").click(() => {
	printJS({ printable: 'qrcode', type: 'html', header: "<style>*{font-family:arial;}</style><h1>QR Code: " + $("#text").val() + "</h1>"});
	});
  </script>
</body>

</html>
